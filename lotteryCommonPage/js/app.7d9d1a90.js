(function(e){function t(t){for(var o,s,r=t[0],c=t[1],l=t[2],u=0,d=[];u<r.length;u++)s=r[u],i[s]&&d.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={app:0},a=[];function s(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"e3532e52"}[e]+".js"}function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,o){n=i[e]=[t,o]});t.push(n[2]=o);var a,c=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=s(e),a=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+o+": "+a+")");s.type=o,s.request=a,n[1](s)}i[e]=void 0}};var u=setTimeout(function(){a({type:"timeout",target:l})},12e4);l.onerror=l.onload=a,c.appendChild(l)}return Promise.all(t)},r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://webres.psy-1.com/sgy/dist/",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"166f":function(e,t,n){e.exports=n.p+"img/cosleep_home_bg_forest@2x.fe362fc7.png"},"24cf":function(e,t,n){},"3a1b":function(e,t,n){"use strict";var o=n("f4b5"),i=n.n(o);i.a},"420c":function(e,t,n){e.exports=n.p+"img/Cosleep_Login-in_image_cat1@2x.418d4881.png"},"56d7":function(e,t,n){"use strict";n.r(t);n("3a0f"),n("a3a3"),n("4d0b");var o=n("329b"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.isIphone?n("div",{staticClass:"dingding"},[e._v(e._s(e.content))]):e._e(),e.isIphone?e._e():n("router-view")],1)},a=[],s=n("2ce0"),r=n("ed3a"),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;try{var o={Method:e,Data:t},i="CB_".concat(Date.now(),"_").concat(Math.ceil(10*Math.random()));o=JSON.stringify(o),Xinchao.Web[i]=function(e,t){n&&n(e,t),delete Xinchao.Web[i]},/(iPhone|iPad|iPod)/i.test(navigator.userAgent)?window.webkit.messageHandlers.XinchaoApp.postMessage({req:o,cbName:i}):XinchaoApp.callRouter(o,i)}catch(a){}},l=(n("aba3"),n("2b1f"),n("bc72"),n("cf54"),function(){function e(t){var n=t.url,o=t.title,i=t.desc,a=t.pic,r=t.dataUrl,c=void 0===r?null:r;Object(s["a"])(this,e),console.log("??"),this.url=n,this.title=o,this.desc=i,this.pic=a,this.dataUrl=c}return Object(r["a"])(e,[{key:"appShare",value:function(){var e={type1:{title:this.title,desc:this.desc,link:this.url,imgUrl:this.pic,shareType:1},type2:{title:this.title,link:this.url,imgUrl:this.pic,shareType:2},type3:{imgUrl:"",shareType:3}};document.getElementById("share").value=JSON.stringify(e),document.getElementById("share2").value=JSON.stringify(e.type1),document.getElementById("share3").value=JSON.stringify(e.type2)}},{key:"callAppRouter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o={Method:e,Data:t},i="CB_".concat(Date.now(),"_").concat(Math.ceil(10*Math.random()));o=JSON.stringify(o),Xinchao.Web[i]=function(e,t){n&&n(e,t),delete Xinchao.Web[i]},/(iPhone|iPad|iPod)/i.test(navigator.userAgent)?window.webkit.messageHandlers.XinchaoApp.postMessage({req:o,cbName:i}):XinchaoApp.callRouter(o,i)}},{key:"appGetName",value:function(){var e=this;this.callAppRouter("isLogin",{},function(t,n){"已登录"===JSON.parse(n).msg&&e.callAppRouter("Login",{},function(e,t){try{var n=JSON.parse(t);localStorage.setItem("name",n.data.name),console.log(n.data.name)}catch(o){localStorage.setItem("name",t.data.name),console.log(t.data.name)}})})}},{key:"weiXinShare",value:function(){var e=this,t={title:e.title,desc:e.desc,link:e.url,img_url:e.pic+"?imageView&thumbnail=400x0&quality=75&tostatic=0"};this.dataUrl,wx.ready(function(e){wx.onMenuShareAppMessage(t),wx.onMenuShareQQ(t),wx.onMenuShareQZone(t),wx.onMenuShareTimeline(t),wx.error(function(e){})})}},{key:"weiXinSDK",value:function(e,t){var n=new XMLHttpRequest,o=this;n.open("GET",e+"/web/v1/wechat/config?debug=1&url="+encodeURIComponent(location.href.split("#")[0])),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){console.log("sdk ok");var i=JSON.parse(n.response);console.log(i.data.wechat_config),i.data.wechat_config.debug=!1,t&&!localStorage.getItem("name")&&(window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx632d4c99bd681cf3&redirect_uri="+encodeURI(location.href.split("#")[0])+"&response_type=code&scope=snsapi_userinfo#wechart_redirect"),t&&!localStorage.getItem("name")||(wx.config(i.data.wechat_config),o.weiXinShare(),o.weiXinGetName(e))}},n.send()}},{key:"weatherCode",value:function(){var e=/code=(.+?)&/,t=window.location.href.match(e);return sessionStorage.setItem("code",t),t||!1}},{key:"weiXinGetName",value:function(e){if(!localStorage.getItem("name")){console.log(t+"asd你想要的"+sessionStorage.getItem("code"));var t=sessionStorage.getItem("code").replace(/code=/,"").replace(/\&.+/,"");$.get(e+"/web/v1/wechat/user",{code:t},function(e){console.log("jq都不行？"),console.log(e.data.nickname),localStorage.setItem("name",e.data.nickname)})}}},{key:"weiXinInit",value:function(e){var t=this.weatherCode();t?this.weiXinSDK(e,!1):this.weiXinSDK(e,!0)}},{key:"appInit",value:function(){this.appShare(),this.appGetName()}},{key:"rawWeiXinShare",value:function(e){var t=new XMLHttpRequest,n=this;t.open("GET",e+"/web/v1/wechat/config?debug=1&url="+encodeURIComponent(location.href.split("#")[0])),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){console.log("sdk ok");var e=JSON.parse(t.response);console.log(e.data.wechat_config),e.data.wechat_config.debug=!1,wx.config(e.data.wechat_config),n.weiXinShare()}},t.send()}},{key:"rawGetName",value:function(){if(!localStorage.getItem("name")){console.log(e+"asd你想要的"+sessionStorage.getItem("code"));var e=sessionStorage.getItem("code").replace(/code=/,"").replace(/\&.+/,"");$.get(url+"/web/v1/wechat/user",{code:e},function(e){console.log("jq都不行？"),console.log(e.data.nickname),localStorage.setItem("name",e.data.nickname)})}}}]),e}()),u={data:function(){return{a:"",isIphone:!0,content:"",url:"https://api.debug.psy-1.com"}},methods:{test:function(){var e={boolean:!1};this.WJH.promiseForBoolean(e).then(function(){console.log("fuck you")}),setTimeout(function(){e.boolean=!0,console.log("??")},5e3)},getWeather:function(e){var t=this;$.get(this.url+"/web/v1/cosleep/env",{platformid:e},function(e){var n=e.data.audit_mode;1===parseInt(n)?t.content="暂时没有活动哦，敬请期待～":t.isIphone=!1})}},mounted:function(){var e=this;c("getEnv",{},function(t,n){var o=null;o="string"===typeof n?JSON.parse(n):n,e.getWeather(o.data.platformid)}),this.test();var t=new l({pic:"http://wx3.sinaimg.cn/mw690/006Zdy2vgy1fxj0dtbn29j302o02nmx1.jpg",url:"https://sleep.heartide.com/",title:"小睡眠",desc:"给你婴儿般的小睡眠"});t.appShare()}},p=u,d=(n("5c0b"),n("5c64"),n("048f")),g=Object(d["a"])(p,i,a,!1,null,null,null);g.options.__file="App.vue";var h=g.exports,f=n("081a"),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home"},[o("transition",{attrs:{name:"fade"}},[e.tips.toggle?o("div",{staticClass:"tips"},[e._v(e._s(e.tips.desc))]):e._e()]),o("div",{staticClass:"top"},[o("img",{staticClass:"bg-img",attrs:{src:n("166f")}}),o("div",{staticClass:"img-outer"},[e.toggle?o("img",{staticClass:"img",attrs:{src:n("bf83")}}):o("img",{staticClass:"img",attrs:{src:n("420c")}})])]),o("div",{staticClass:"center"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"myinput",attrs:{placeholder:"请输入礼品码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),o("div",{staticClass:"submit",on:{click:e.login}},[e._v("马上兑换")])]),o("transition",{attrs:{name:"fade"}},[e.template_show?o("div",{staticClass:"notice"},[o("div",{staticClass:"template"},[o("div",{staticClass:"close",on:{click:function(t){e.template_show=!1}}},[e._v("×")]),1===e.type?o("div",{staticClass:"type-1"},[o("img",{staticClass:"img",attrs:{src:n("b569")}}),o("p",{staticClass:"p-success"},[e._v("兑换成功")]),o("p",{staticClass:"p-detail"},[e._v("兑换成功，可到【开通会员】中查看")]),o("div",{staticClass:"submit p-submit",on:{click:e.toHuiYuanCenter}},[e._v("马上查看")])]):e._e(),2===e.type?o("div",{staticClass:"type-1"},[o("img",{staticClass:"img",attrs:{src:n("6a78")}}),o("p",{staticClass:"p-success"},[e._v("兑换失败")]),o("p",{staticClass:"p-detail"},[e._v(e._s(e.err_msg))]),o("div",{staticClass:"submit p-submit",on:{click:function(t){e.template_show=!1}}},[e._v("重新输入")])]):e._e(),3===e.type?o("div",{staticClass:"type-3"},[o("img",{staticClass:"img",attrs:{src:n("dc19")}}),o("p",{staticClass:"p-success"},[e._v("登陆绑定")]),o("div",{staticClass:"type3-input"},[o("div",{staticClass:"input-1"},[o("i",{staticClass:"iconfont"},[e._v("")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"phone",attrs:{placeholder:"请输入手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),o("div",{staticClass:"input-2"},[o("i",{staticClass:"iconfont"},[e._v("")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.assign,expression:"assign"}],staticClass:"assign",attrs:{placeholder:"请输入验证码"},domProps:{value:e.assign},on:{input:function(t){t.target.composing||(e.assign=t.target.value)}}}),o("div",{staticClass:"send-assign",on:{click:e.sendAssign}},[e._v(e._s(e.assign_count))])])]),o("div",{staticClass:"desc"},[e._v("·为了更好保护你的权益，请绑定手机号·")]),o("div",{staticClass:"submit type-3-sumbit",on:{click:e.bindPhone}},[e._v("马上绑定")])]):e._e()])]):e._e()])],1)},v=[],_=n("7f43"),b=n.n(_),y=n("0e4f"),w=n.n(y),S={name:"home",data:function(){return{tips:{toggle:!1,desc:""},home_height:0,toggle:!0,template_show:!1,type:999,code:"",url:"https://api.debug.psy-1.com",link_to:"https://web.debug.psy-1.com/cosleep/lottery",err_msg:"当前输入的兑换码无效或过期，请确认兑换码",openid:"",got_openid:!1,phone:"",assign:"",assign_count:"获取",assign_count_interval:null,assign_count_busy:!1,toggle_timeout:null,redirect_interval:null}},components:{},watch:{code:function(){var e=this;this.toggle=!1,clearTimeout(this.toggle_timeout),this.toggle_timeout=setTimeout(function(){e.toggle=!0},3e3)}},methods:{toHuiYuanCenter:function(){c("Redirect",{code:10017},function(e,t){})},submit:function(){var e=this;if(!this.code)return console.log("不能为空"),this.err_msg="当前输入的兑换码不能为空，请确认兑换码",this.template_show=!0,void(this.type=2);$.post(this.$parent.url+"/web/v1/cosleepmp/vip/code/exchange",{openid:this.openid,code:this.code},function(t){e.err_msg=t.msg,28===parseInt(t.status)?e.type=3:1===parseInt(t.status)?(e.err_msg="兑换成功，可到【购买记录】中查看",e.type=1):e.type=2,e.$nextTick(function(){e.template_show=!0})})},Tips:function(e){var t=this;this.tips.desc=e,this.tips.busy||(this.tips.toggle=!0,this.tips.busy=!0,setTimeout(function(){t.tips.toggle=!1,t.tips.busy=!1},2e3))},getOpenId:function(){var e=this;c("Login",{},function(t,n){var o=null;o="string"===typeof n?JSON.parse(n):n,e.openid=o.data.openid,console.log(e.openid)})},login:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c("isLogin",{},function(o,i){console.log("??");var a=null;if(a="string"===typeof i?JSON.parse(i):i,"已登录"===a.msg){if(console.log("已登陆"),n||t.submit(),t.got_openid)return void clearInterval(t.redirect_interval);t.getOpenId()}else{if(n)return console.log(n),void console.log("??zzasdasdasinit");c("Redirect",{code:"1024"},function(n,o){t.redirect_interval=setInterval(function(){t.login(e,!0)},500)})}})},bindPhone:function(){var e=this;if(!this.assign)return this.Tips("请输入验证码"),0;if(!this.phone)return this.Tips("请输入手机号"),0;var t=w.a.stringify({openid:this.openid,mobile:this.phone,code:this.assign});b()({method:"POST",url:this.$parent.url+"/web/v1/cosleep/user/mobile/bind",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(t){34===parseInt(t.data.status)&&e.Tips("验证码输入错误"),18===parseInt(t.data.status)&&e.Tips("该手机号码已被其他账户绑定"),1===parseInt(t.data.status)&&(e.Tips("绑定成功"),e.template_show=!1)})},getAssign:function(){b()({method:"POST",url:this.$parent.url+"/web/v1/cosleep/verifycode/send",data:{mobile:this.phone}}).then(function(e){console.log("成功"===e.data.msg)})},sendAssign:function(){var e=this;if(!this.assign_count_busy){if(!this.phone)return this.Tips("请输入手机号"),0;if(/^[0-9]*[1-9][0-9]*$/g.test(parseInt(this.phone))&&11===this.phone.split("").length){this.assign_count_busy=!0,this.getAssign();var t=60;this.assign_count=t+"s",this.assign_count_interval=setInterval(function(){t-=1,e.assign_count=t+"s",0===t&&(e.assign_count_busy=!1,setTimeout(function(){e.assign_count="获取"},1e3),clearInterval(e.assign_count_interval))},1e3)}else this.Tips("请输入正确的手机号")}}},mounted:function(){var e=this;console.log("mounted"),c("isLogin",{},function(t,n){console.log("call isLogin");var o=null;o="string"===typeof n?JSON.parse(n):n,"已登录"===o.msg&&e.getOpenId()})}},I=S,C=(n("3a1b"),Object(d["a"])(I,m,v,!1,null,"7437a640",null));C.options.__file="Home.vue";var k=C.exports;o["a"].use(f["a"]);var x=new f["a"]({routes:[{path:"/",name:"home",component:k},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),O=n("f2de");o["a"].use(O["a"]);var T=new O["a"].Store({state:{},mutations:{},actions:{}}),N=n("9838");Object(N["a"])("".concat("https://webres.psy-1.com/sgy/dist/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("ec80"),n("aa0f"),n("25d7"),n("20a2");var j=function(){function e(){Object(s["a"])(this,e)}return Object(r["a"])(e,null,[{key:"promiseForBoolean",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o={};Object.assign(o,n);var i=function(t){n.boolean===!o.boolean&&(clearInterval(e),t())};return t=new Promise(function(t,n){e=setInterval(i.bind(null,t),1e3)}),t}},{key:"getAPIData",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=new(new XMLHttpRequest),i="";o.open("GET",e),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&t&&t()},o.setRequestHeader("Content-Type","application/json");var a=!0,s=!1,r=void 0;try{for(var c,l=n[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var u=c.value,p=u.val,d=u.key;i+=d+"="+p+"&"}}catch(g){s=!0,r=g}finally{try{a||null==l.return||l.return()}finally{if(s)throw r}}i.replace(/&$/,""),o.send()}},{key:"randomNum",value:function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}}},{key:"musicCount",value:function(e){var t=parseInt(e),n=0,o=0;t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(o=parseInt(n/60),n=parseInt(n%60)));var i="";parseInt(t)<10&&(i="0");var a=i+parseInt(t)+" ",s="0";return a=s+parseInt(n)+" : "+a,o>0&&(a=parseInt(o)+"小时"+a),a}}]),e}();o["a"].prototype.WJH=j,o["a"].config.productionTip=!1,n("dc72"),new o["a"]({router:x,store:T,render:function(e){return e(h)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var o=n("24cf"),i=n.n(o);i.a},"5c64":function(e,t,n){"use strict";var o=n("e41e"),i=n.n(o);i.a},"6a78":function(e,t,n){e.exports=n.p+"img/cosleep_window_img_fail@2x.15b0f673.png"},b569:function(e,t,n){e.exports=n.p+"img/cosleep_window_img_complete@3x.e225be02.png"},bf83:function(e,t,n){e.exports=n.p+"img/Cosleep_Login-in_image_cat2@2x.47a0ff8b.png"},dc19:function(e,t,n){e.exports=n.p+"img/cosleep_window_img_login@2x.7da7fc49.png"},dc72:function(e,t){function n(){var e=document.documentElement.clientWidth,t=document.querySelector("html");t.style.fontSize=e/10+"px"}n(),window.addEventListener("resize",n)},e41e:function(e,t,n){},f4b5:function(e,t,n){}});
//# sourceMappingURL=app.7d9d1a90.js.map