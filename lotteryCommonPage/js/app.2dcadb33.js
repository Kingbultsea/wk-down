(function(e){function t(t){for(var i,a,r=t[0],c=t[1],l=t[2],u=0,d=[];u<r.length;u++)a=r[u],o[a]&&d.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={app:0},s=[];function a(e){return r.p+"js/"+({about:"about"}[e]||e)+"."+{about:"e3532e52"}[e]+".js"}function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(t,i){n=o[e]=[t,i]});t.push(n[2]=i);var s,c=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=a(e),s=function(t){l.onerror=l.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+i+": "+s+")");a.type=i,a.request=s,n[1](a)}o[e]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:l})},12e4);l.onerror=l.onload=s,c.appendChild(l)}return Promise.all(t)},r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="https://webres.psy-1.com/sgy/dist/",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"166f":function(e,t,n){e.exports=n.p+"img/cosleep_home_bg_forest@2x.fe362fc7.png"},"24cf":function(e,t,n){},3185:function(e,t,n){"use strict";var i=n("37ca"),o=n.n(i);o.a},"37ca":function(e,t,n){},"420c":function(e,t,n){e.exports=n.p+"img/Cosleep_Login-in_image_cat1@2x.418d4881.png"},"56d7":function(e,t,n){"use strict";n.r(t);n("3a0f"),n("a3a3"),n("4d0b");var i=n("329b"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.isIphone?n("div",{staticClass:"dingding"},[e._v(e._s(e.content))]):e._e(),e.isIphone?e._e():n("router-view")],1)},s=[],a=n("2ce0"),r=n("ed3a"),c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;try{var i={Method:e,Data:t},o="CB_".concat(Date.now(),"_").concat(Math.ceil(10*Math.random()));i=JSON.stringify(i),Xinchao.Web[o]=function(e,t){n&&n(e,t),delete Xinchao.Web[o]},/(iPhone|iPad|iPod)/i.test(navigator.userAgent)?window.webkit.messageHandlers.XinchaoApp.postMessage({req:i,cbName:o}):XinchaoApp.callRouter(i,o)}catch(s){}},l=(n("aba3"),n("2b1f"),n("bc72"),n("cf54"),function(){function e(t){var n=t.url,i=t.title,o=t.desc,s=t.pic,r=t.dataUrl,c=void 0===r?null:r;Object(a["a"])(this,e),console.log("??"),this.url=n,this.title=i,this.desc=o,this.pic=s,this.dataUrl=c}return Object(r["a"])(e,[{key:"appShare",value:function(){var e={type1:{title:this.title,desc:this.desc,link:this.url,imgUrl:this.pic,shareType:1},type2:{title:this.title,link:this.url,imgUrl:this.pic,shareType:2},type3:{imgUrl:"",shareType:3}};document.getElementById("share").value=JSON.stringify(e),document.getElementById("share2").value=JSON.stringify(e.type1),document.getElementById("share3").value=JSON.stringify(e.type2)}},{key:"callAppRouter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i={Method:e,Data:t},o="CB_".concat(Date.now(),"_").concat(Math.ceil(10*Math.random()));i=JSON.stringify(i),Xinchao.Web[o]=function(e,t){n&&n(e,t),delete Xinchao.Web[o]},/(iPhone|iPad|iPod)/i.test(navigator.userAgent)?window.webkit.messageHandlers.XinchaoApp.postMessage({req:i,cbName:o}):XinchaoApp.callRouter(i,o)}},{key:"appGetName",value:function(){var e=this;this.callAppRouter("isLogin",{},function(t,n){"已登录"===JSON.parse(n).msg&&e.callAppRouter("Login",{},function(e,t){try{var n=JSON.parse(t);localStorage.setItem("name",n.data.name),console.log(n.data.name)}catch(i){localStorage.setItem("name",t.data.name),console.log(t.data.name)}})})}},{key:"weiXinShare",value:function(){var e=this,t={title:e.title,desc:e.desc,link:e.url,img_url:e.pic+"?imageView&thumbnail=400x0&quality=75&tostatic=0"};this.dataUrl,wx.ready(function(e){wx.onMenuShareAppMessage(t),wx.onMenuShareQQ(t),wx.onMenuShareQZone(t),wx.onMenuShareTimeline(t),wx.error(function(e){})})}},{key:"weiXinSDK",value:function(e,t){var n=new XMLHttpRequest,i=this;n.open("GET",e+"/web/v1/wechat/config?debug=1&url="+encodeURIComponent(location.href.split("#")[0])),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){console.log("sdk ok");var o=JSON.parse(n.response);console.log(o.data.wechat_config),o.data.wechat_config.debug=!1,t&&!localStorage.getItem("name")&&(window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx632d4c99bd681cf3&redirect_uri="+encodeURI(location.href.split("#")[0])+"&response_type=code&scope=snsapi_userinfo#wechart_redirect"),t&&!localStorage.getItem("name")||(wx.config(o.data.wechat_config),i.weiXinShare(),i.weiXinGetName(e))}},n.send()}},{key:"weatherCode",value:function(){var e=/code=(.+?)&/,t=window.location.href.match(e);return sessionStorage.setItem("code",t),t||!1}},{key:"weiXinGetName",value:function(e){if(!localStorage.getItem("name")){console.log(t+"asd你想要的"+sessionStorage.getItem("code"));var t=sessionStorage.getItem("code").replace(/code=/,"").replace(/\&.+/,"");$.get(e+"/web/v1/wechat/user",{code:t},function(e){console.log("jq都不行？"),console.log(e.data.nickname),localStorage.setItem("name",e.data.nickname)})}}},{key:"weiXinInit",value:function(e){var t=this.weatherCode();t?this.weiXinSDK(e,!1):this.weiXinSDK(e,!0)}},{key:"appInit",value:function(){this.appShare(),this.appGetName()}},{key:"rawWeiXinShare",value:function(e){var t=new XMLHttpRequest,n=this;t.open("GET",e+"/web/v1/wechat/config?debug=1&url="+encodeURIComponent(location.href.split("#")[0])),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){console.log("sdk ok");var e=JSON.parse(t.response);console.log(e.data.wechat_config),e.data.wechat_config.debug=!1,wx.config(e.data.wechat_config),n.weiXinShare()}},t.send()}},{key:"rawGetName",value:function(){if(!localStorage.getItem("name")){console.log(e+"asd你想要的"+sessionStorage.getItem("code"));var e=sessionStorage.getItem("code").replace(/code=/,"").replace(/\&.+/,"");$.get(url+"/web/v1/wechat/user",{code:e},function(e){console.log("jq都不行？"),console.log(e.data.nickname),localStorage.setItem("name",e.data.nickname)})}}}]),e}()),u={data:function(){return{a:"",isIphone:!0,content:"",url:"https://api.debug.psy-1.com"}},methods:{test:function(){var e={boolean:!1};this.WJH.promiseForBoolean(e).then(function(){console.log("fuck you")}),setTimeout(function(){e.boolean=!0,console.log("??")},5e3)},getWeather:function(e){var t=this;$.get(this.url+"/web/v1/cosleep/env",{platformid:e},function(e){var n=e.data.audit_mode;1===parseInt(n)?t.content="暂时没有活动哦，敬请期待～":t.isIphone=!1})}},mounted:function(){var e=this;c("getEnv",{},function(t,n){var i=null;i="string"===typeof n?JSON.parse(n):n,e.getWeather(i.data.platformid)}),this.test();var t=new l({pic:"http://wx3.sinaimg.cn/mw690/006Zdy2vgy1fxj0dtbn29j302o02nmx1.jpg",url:"https://sleep.heartide.com/",title:"小睡眠",desc:"给你婴儿般的小睡眠"});t.appShare()}},p=u,d=(n("5c0b"),n("5c64"),n("048f")),g=Object(d["a"])(p,o,s,!1,null,null,null);g.options.__file="App.vue";var h=g.exports,f=n("081a"),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[i("transition",{attrs:{name:"fade"}},[e.tips.toggle?i("div",{staticClass:"tips"},[e._v(e._s(e.tips.desc))]):e._e()]),i("div",{staticClass:"top"},[i("img",{staticClass:"bg-img",attrs:{src:n("166f")}}),i("div",{staticClass:"img-outer"},[e.toggle?i("img",{staticClass:"img",attrs:{src:n("bf83")}}):i("img",{staticClass:"img",attrs:{src:n("420c")}})])]),i("div",{staticClass:"center"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"myinput",attrs:{placeholder:"请输入礼品码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),i("div",{staticClass:"submit",on:{click:e.login}},[e._v("马上兑换")])]),i("transition",{attrs:{name:"fade"}},[e.template_show?i("div",{staticClass:"notice"},[i("div",{staticClass:"template"},[i("div",{staticClass:"close",on:{click:function(t){e.template_show=!1}}},[e._v("×")]),1===e.type?i("div",{staticClass:"type-1"},[i("img",{staticClass:"img",attrs:{src:n("b569")}}),i("p",{staticClass:"p-success"},[e._v("兑换成功")]),i("p",{staticClass:"p-detail"},[e._v("兑换成功，可到【购买记录】中查看")]),i("div",{staticClass:"submit p-submit",on:{click:e.submit}},[e._v("马上兑换")])]):e._e(),2===e.type?i("div",{staticClass:"type-1"},[i("img",{staticClass:"img",attrs:{src:n("6a78")}}),i("p",{staticClass:"p-success"},[e._v("兑换失败")]),i("p",{staticClass:"p-detail"},[e._v(e._s(e.err_msg))]),i("div",{staticClass:"submit p-submit",on:{click:function(t){e.template_show=!1}}},[e._v("重新输入")])]):e._e(),3===e.type?i("div",{staticClass:"type-3"},[i("img",{staticClass:"img",attrs:{src:n("dc19")}}),i("p",{staticClass:"p-success"},[e._v("登陆绑定")]),i("div",{staticClass:"type3-input"},[i("div",{staticClass:"input-1"},[i("i",{staticClass:"iconfont"},[e._v("")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"phone",attrs:{placeholder:"请输入手机号"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),i("div",{staticClass:"input-2"},[i("i",{staticClass:"iconfont"},[e._v("")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.assign,expression:"assign"}],staticClass:"assign",attrs:{placeholder:"请输入验证码"},domProps:{value:e.assign},on:{input:function(t){t.target.composing||(e.assign=t.target.value)}}}),i("div",{staticClass:"send-assign",on:{click:e.sendAssign}},[e._v(e._s(e.assign_count))])])]),i("div",{staticClass:"desc"},[e._v("·为了更好保护你的权益，请绑定手机号·")]),i("div",{staticClass:"submit type-3-sumbit",on:{click:e.bindPhone}},[e._v("马上绑定")])]):e._e()])]):e._e()])],1)},v=[],_=n("7f43"),y=n.n(_),b=n("0e4f"),w=n.n(b),S={name:"home",data:function(){return{tips:{toggle:!1,desc:""},home_height:0,toggle:!0,template_show:!1,type:999,code:"",url:"https://api.debug.psy-1.com",link_to:"https://web.debug.psy-1.com/cosleep/lottery",err_msg:"当前输入的兑换码无效或过期，请确认兑换码",openid:"",got_openid:!1,phone:"",assign:"",assign_count:"获取",assign_count_interval:null,assign_count_busy:!1,toggle_timeout:null,redirect_interval:null}},components:{},watch:{code:function(){var e=this;this.toggle=!1,clearTimeout(this.toggle_timeout),this.toggle_timeout=setTimeout(function(){e.toggle=!0},3e3)}},methods:{submit:function(){var e=this;if(!this.code)return console.log("不能为空"),this.err_msg="当前输入的兑换码不能为空，请确认兑换码",this.template_show=!0,void(this.type=2);$.post(this.$parent.url+"/web/v1/cosleepmp/vip/code/exchange",{openid:this.openid,code:this.code},function(t){e.err_msg=t.msg,28===parseInt(t.status)?e.type=3:1===parseInt(t.status)?(e.err_msg="兑换成功，可到【购买记录】中查看",e.type=1):e.type=2,e.$nextTick(function(){e.template_show=!0})})},Tips:function(e){var t=this;this.tips.desc=e,this.tips.busy||(this.tips.toggle=!0,this.tips.busy=!0,setTimeout(function(){t.tips.toggle=!1,t.tips.busy=!1},2e3))},getOpenId:function(){var e=this;c("Login",{},function(t,n){var i=null;i="string"===typeof n?JSON.parse(n):n,e.openid=i.data.openid,console.log(e.openid)})},login:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c("isLogin",{},function(i,o){console.log("??");var s=null;if(s="string"===typeof o?JSON.parse(o):o,"已登录"===s.msg){if(console.log("已登陆"),n||t.submit(),t.got_openid)return void clearInterval(t.redirect_interval);t.getOpenId()}else{if(n)return console.log(n),void console.log("??zzasdasdasinit");c("Redirect",{code:"1024"},function(n,i){t.redirect_interval=setInterval(function(){t.login(e,!0)},500)})}})},bindPhone:function(){var e=this;if(!this.assign)return this.Tips("请输入验证码"),0;if(!this.phone)return this.Tips("请输入手机号"),0;var t=w.a.stringify({openid:this.openid,mobile:this.phone,code:this.assign});y()({method:"POST",url:this.$parent.url+"/web/v1/cosleep/user/mobile/bind",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(t){34===parseInt(t.data.status)&&e.Tips("验证码输入错误"),18===parseInt(t.data.status)&&e.Tips("该手机号码已被其他账户绑定"),1===parseInt(t.data.status)&&(e.Tips("绑定成功"),e.template_show=!1)})},getAssign:function(){y()({method:"POST",url:this.$parent.url+"/web/v1/cosleep/verifycode/send",data:{mobile:this.phone}}).then(function(e){console.log("成功"===e.data.msg)})},sendAssign:function(){var e=this;if(!this.assign_count_busy){if(!this.phone)return this.Tips("请输入手机号"),0;if(/^[0-9]*[1-9][0-9]*$/g.test(parseInt(this.phone))&&11===this.phone.split("").length){this.assign_count_busy=!0,this.getAssign();var t=60;this.assign_count=t+"s",this.assign_count_interval=setInterval(function(){t-=1,e.assign_count=t+"s",0===t&&(e.assign_count_busy=!1,setTimeout(function(){e.assign_count="获取"},1e3),clearInterval(e.assign_count_interval))},1e3)}else this.Tips("请输入正确的手机号")}}},mounted:function(){var e=this;console.log("mounted"),c("isLogin",{},function(t,n){console.log("call isLogin");var i=null;i="string"===typeof n?JSON.parse(n):n,"已登录"===i.msg&&e.getOpenId()})}},I=S,C=(n("3185"),Object(d["a"])(I,m,v,!1,null,"4fc0fdd6",null));C.options.__file="Home.vue";var k=C.exports;i["a"].use(f["a"]);var x=new f["a"]({routes:[{path:"/",name:"home",component:k},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),O=n("f2de");i["a"].use(O["a"]);var T=new O["a"].Store({state:{},mutations:{},actions:{}}),N=n("9838");Object(N["a"])("".concat("https://webres.psy-1.com/sgy/dist/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("ec80"),n("aa0f"),n("25d7"),n("20a2");var j=function(){function e(){Object(a["a"])(this,e)}return Object(r["a"])(e,null,[{key:"promiseForBoolean",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={};Object.assign(i,n);var o=function(t){n.boolean===!i.boolean&&(clearInterval(e),t())};return t=new Promise(function(t,n){e=setInterval(o.bind(null,t),1e3)}),t}},{key:"getAPIData",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new(new XMLHttpRequest),o="";i.open("GET",e),i.onreadystatechange=function(){4===this.readyState&&200===this.status&&t&&t()},i.setRequestHeader("Content-Type","application/json");var s=!0,a=!1,r=void 0;try{for(var c,l=n[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var u=c.value,p=u.val,d=u.key;o+=d+"="+p+"&"}}catch(g){a=!0,r=g}finally{try{s||null==l.return||l.return()}finally{if(a)throw r}}o.replace(/&$/,""),i.send()}},{key:"randomNum",value:function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}}},{key:"musicCount",value:function(e){var t=parseInt(e),n=0,i=0;t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(i=parseInt(n/60),n=parseInt(n%60)));var o="";parseInt(t)<10&&(o="0");var s=o+parseInt(t)+" ",a="0";return s=a+parseInt(n)+" : "+s,i>0&&(s=parseInt(i)+"小时"+s),s}}]),e}();i["a"].prototype.WJH=j,i["a"].config.productionTip=!1,n("dc72"),new i["a"]({router:x,store:T,render:function(e){return e(h)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var i=n("24cf"),o=n.n(i);o.a},"5c64":function(e,t,n){"use strict";var i=n("e41e"),o=n.n(i);o.a},"6a78":function(e,t,n){e.exports=n.p+"img/cosleep_window_img_fail@2x.15b0f673.png"},b569:function(e,t,n){e.exports=n.p+"img/cosleep_window_img_complete@3x.e225be02.png"},bf83:function(e,t,n){e.exports=n.p+"img/Cosleep_Login-in_image_cat2@2x.47a0ff8b.png"},dc19:function(e,t,n){e.exports=n.p+"img/cosleep_window_img_login@2x.7da7fc49.png"},dc72:function(e,t){function n(){var e=document.documentElement.clientWidth,t=document.querySelector("html");t.style.fontSize=e/10+"px"}n(),window.addEventListener("resize",n)},e41e:function(e,t,n){}});
//# sourceMappingURL=app.2dcadb33.js.map