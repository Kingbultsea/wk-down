(function(t){function e(e){for(var s,a,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)a=r[u],i[a]&&d.push(i[a][0]),i[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);p&&p(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},i={app:0},o=[];function a(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"e3532e52"}[t]+".js"}function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise(function(e,s){n=i[t]=[e,s]});e.push(n[2]=s);var o,c=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=a(t),o=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var s=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+s+": "+o+")");a.type=s,a.request=o,n[1](a)}i[t]=void 0}};var u=setTimeout(function(){o({type:"timeout",target:l})},12e4);l.onerror=l.onload=o,c.appendChild(l)}return Promise.all(e)},r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="https://webres.psy-1.com/sgy/dist/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"166f":function(t,e,n){t.exports=n.p+"img/cosleep_home_bg_forest@2x.fe362fc7.png"},"24cf":function(t,e,n){},"420c":function(t,e,n){t.exports=n.p+"img/Cosleep_Login-in_image_cat1@2x.418d4881.png"},"56d7":function(t,e,n){"use strict";n.r(e);n("3a0f"),n("a3a3"),n("4d0b");var s=n("329b"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.isIphone?n("div",{staticClass:"dingding"},[t._v(t._s(t.content))]):t._e(),t.isIphone?t._e():n("router-view")],1)},o=[],a=n("2ce0"),r=n("ed3a"),c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;try{var s={Method:t,Data:e},i="CB_".concat(Date.now(),"_").concat(Math.ceil(10*Math.random()));s=JSON.stringify(s),Xinchao.Web[i]=function(t,e){n&&n(t,e),delete Xinchao.Web[i]},/(iPhone|iPad|iPod)/i.test(navigator.userAgent)?window.webkit.messageHandlers.XinchaoApp.postMessage({req:s,cbName:i}):XinchaoApp.callRouter(s,i)}catch(o){}},l={data:function(){return{a:"",isIphone:!0,content:"",url:"https://api.debug.psy-1.com"}},methods:{test:function(){var t={boolean:!1};this.WJH.promiseForBoolean(t).then(function(){console.log("fuck you")}),setTimeout(function(){t.boolean=!0,console.log("??")},5e3)},getWeather:function(t){var e=this;$.get(this.url+"/web/v1/cosleep/env",{platformid:t},function(t){var n=t.data.audit_mode;1===parseInt(n)?e.content="暂时没有活动哦，敬请期待～":e.isIphone=!1})}},mounted:function(){var t=this;c("getEnv",{},function(e,n){var s=null;s="string"===typeof n?JSON.parse(n):n,t.getWeather(s.data.platformid)}),this.test()}},u=l,p=(n("5c0b"),n("5c64"),n("048f")),d=Object(p["a"])(u,i,o,!1,null,null,null);d.options.__file="App.vue";var g=d.exports,f=n("081a"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("transition",{attrs:{name:"fade"}},[t.tips.toggle?s("div",{staticClass:"tips"},[t._v(t._s(t.tips.desc))]):t._e()]),s("div",{staticClass:"top"},[s("img",{staticClass:"bg-img",attrs:{src:n("166f")}}),s("div",{staticClass:"img-outer"},[t.toggle?s("img",{staticClass:"img",attrs:{src:n("bf83")}}):s("img",{staticClass:"img",attrs:{src:n("420c")}})])]),s("div",{staticClass:"center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"myinput",domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),s("div",{staticClass:"submit",on:{click:t.login}},[t._v("马上兑换")])]),s("transition",{attrs:{name:"fade"}},[t.template_show?s("div",{staticClass:"notice"},[s("div",{staticClass:"template"},[s("div",{staticClass:"close",on:{click:function(e){t.template_show=!1}}},[t._v("×")]),1===t.type?s("div",{staticClass:"type-1"},[s("img",{staticClass:"img",attrs:{src:n("b569")}}),s("p",{staticClass:"p-success"},[t._v("兑换成功")]),s("p",{staticClass:"p-detail"},[t._v("兑换成功，可到【购买记录】中查看")]),s("div",{staticClass:"submit p-submit",on:{click:t.submit}},[t._v("马上兑换")])]):t._e(),2===t.type?s("div",{staticClass:"type-1"},[s("img",{staticClass:"img",attrs:{src:n("6a78")}}),s("p",{staticClass:"p-success"},[t._v("兑换失败")]),s("p",{staticClass:"p-detail"},[t._v(t._s(t.err_msg))]),s("div",{staticClass:"submit p-submit",on:{click:function(e){t.template_show=!1}}},[t._v("重新输入")])]):t._e(),3===t.type?s("div",{staticClass:"type-3"},[s("img",{staticClass:"img",attrs:{src:n("dc19")}}),s("p",{staticClass:"p-success"},[t._v("登陆绑定")]),s("div",{staticClass:"type3-input"},[s("div",{staticClass:"input-1"},[s("i",{staticClass:"iconfont"},[t._v("")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"phone",attrs:{placeholder:"请输入手机号"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),s("div",{staticClass:"input-2"},[s("i",{staticClass:"iconfont"},[t._v("")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.assign,expression:"assign"}],staticClass:"assign",attrs:{placeholder:"请输入验证码"},domProps:{value:t.assign},on:{input:function(e){e.target.composing||(t.assign=e.target.value)}}}),s("div",{staticClass:"send-assign",on:{click:t.sendAssign}},[t._v(t._s(t.assign_count))])])]),s("div",{staticClass:"desc"},[t._v("·为了更好保护你的权益，请绑定手机号·")]),s("div",{staticClass:"submit type-3-sumbit",on:{click:t.bindPhone}},[t._v("马上绑定")])]):t._e()])]):t._e()])],1)},h=[],m=(n("bc72"),n("7f43")),_=n.n(m),b=n("0e4f"),y=n.n(b),w={name:"home",data:function(){return{tips:{toggle:!1,desc:""},home_height:0,toggle:!0,template_show:!1,type:999,code:"",url:"https://api.debug.psy-1.com",link_to:"https://web.debug.psy-1.com/cosleep/lottery",err_msg:"当前输入的兑换码无效或过期，请确认兑换码",openid:"",got_openid:!1,phone:"",assign:"",assign_count:"获取",assign_count_interval:null,assign_count_busy:!1,toggle_timeout:null,redirect_interval:null}},components:{},watch:{code:function(){var t=this;this.toggle=!1,clearTimeout(this.toggle_timeout),this.toggle_timeout=setTimeout(function(){t.toggle=!0},3e3)}},methods:{submit:function(){var t=this;if(!this.code)return console.log("不能为空"),this.err_msg="当前输入的兑换码不能为空，请确认兑换码",this.template_show=!0,void(this.type=2);$.post(this.$parent.url+"/web/v1/cosleepmp/vip/code/exchange",{openid:this.openid,code:this.code},function(e){t.err_msg=e.msg,28===parseInt(e.status)?t.type=3:1===parseInt(e.status)?(t.err_msg="兑换成功，可到【购买记录】中查看",t.type=1):t.type=2,t.$nextTick(function(){t.template_show=!0})})},Tips:function(t){var e=this;this.tips.desc=t,this.tips.busy||(this.tips.toggle=!0,this.tips.busy=!0,setTimeout(function(){e.tips.toggle=!1,e.tips.busy=!1},2e3))},getOpenId:function(){var t=this;c("Login",{},function(e,n){var s=null;s="string"===typeof n?JSON.parse(n):n,t.openid=s.data.openid,console.log(t.openid)})},login:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c("isLogin",{},function(s,i){console.log("??");var o=null;if(o="string"===typeof i?JSON.parse(i):i,"已登录"===o.msg){if(console.log("已登陆"),n||e.submit(),e.got_openid)return void clearInterval(e.redirect_interval);e.getOpenId()}else{if(n)return console.log(n),void console.log("??zzasdasdasinit");c("Redirect",{code:"1024"},function(n,s){e.redirect_interval=setInterval(function(){e.login(t,!0)},500)})}})},bindPhone:function(){var t=this;if(!this.assign)return this.Tips("请输入验证码"),0;if(!this.phone)return this.Tips("请输入手机号"),0;var e=y.a.stringify({openid:this.openid,mobile:this.phone,code:this.assign});_()({method:"POST",url:this.$parent.url+"/web/v1/cosleep/user/mobile/bind",data:e,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(function(e){34===parseInt(e.data.status)&&t.Tips("验证码输入错误"),18===parseInt(e.data.status)&&t.Tips("该手机号码已被其他账户绑定"),1===parseInt(e.data.status)&&(t.Tips("绑定成功"),t.template_show=!1)})},getAssign:function(){_()({method:"POST",url:this.$parent.url+"/web/v1/cosleep/verifycode/send",data:{mobile:this.phone}}).then(function(t){console.log("成功"===t.data.msg)})},sendAssign:function(){var t=this;if(!this.assign_count_busy){if(!this.phone)return this.Tips("请输入手机号"),0;if(/^[0-9]*[1-9][0-9]*$/g.test(parseInt(this.phone))&&11===this.phone.split("").length){this.assign_count_busy=!0,this.getAssign();var e=60;this.assign_count=e+"s",this.assign_count_interval=setInterval(function(){e-=1,t.assign_count=e+"s",0===e&&(t.assign_count_busy=!1,setTimeout(function(){t.assign_count="获取"},1e3),clearInterval(t.assign_count_interval))},1e3)}else this.Tips("请输入正确的手机号")}}},mounted:function(){var t=this;console.log("mounted"),c("isLogin",{},function(e,n){console.log("call isLogin");var s=null;s="string"===typeof n?JSON.parse(n):n,"已登录"===s.msg&&t.getOpenId()})}},C=w,I=(n("a4c3"),Object(p["a"])(C,v,h,!1,null,"479d107e",null));I.options.__file="Home.vue";var x=I.exports;s["a"].use(f["a"]);var T=new f["a"]({routes:[{path:"/",name:"home",component:x},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]}),O=n("f2de");s["a"].use(O["a"]);var k=new O["a"].Store({state:{},mutations:{},actions:{}}),P=n("9838");Object(P["a"])("".concat("https://webres.psy-1.com/sgy/dist/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("ec80"),n("aa0f"),n("25d7"),n("aba3"),n("20a2");var j=function(){function t(){Object(a["a"])(this,t)}return Object(r["a"])(t,null,[{key:"promiseForBoolean",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s={};Object.assign(s,n);var i=function(e){n.boolean===!s.boolean&&(clearInterval(t),e())};return e=new Promise(function(e,n){t=setInterval(i.bind(null,e),1e3)}),e}},{key:"getAPIData",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=new(new XMLHttpRequest),i="";s.open("GET",t),s.onreadystatechange=function(){4===this.readyState&&200===this.status&&e&&e()},s.setRequestHeader("Content-Type","application/json");var o=!0,a=!1,r=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,p=u.val,d=u.key;i+=d+"="+p+"&"}}catch(g){a=!0,r=g}finally{try{o||null==l.return||l.return()}finally{if(a)throw r}}i.replace(/&$/,""),s.send()}},{key:"randomNum",value:function(t,e){switch(arguments.length){case 1:return parseInt(Math.random()*t+1,10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}}},{key:"musicCount",value:function(t){var e=parseInt(t),n=0,s=0;e>60&&(n=parseInt(e/60),e=parseInt(e%60),n>60&&(s=parseInt(n/60),n=parseInt(n%60)));var i="";parseInt(e)<10&&(i="0");var o=i+parseInt(e)+" ",a="0";return o=a+parseInt(n)+" : "+o,s>0&&(o=parseInt(s)+"小时"+o),o}}]),t}();s["a"].prototype.WJH=j,s["a"].config.productionTip=!1,n("dc72"),new s["a"]({router:T,store:k,render:function(t){return t(g)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var s=n("24cf"),i=n.n(s);i.a},"5c64":function(t,e,n){"use strict";var s=n("e41e"),i=n.n(s);i.a},"5e45":function(t,e,n){},"6a78":function(t,e,n){t.exports=n.p+"img/cosleep_window_img_fail@2x.15b0f673.png"},a4c3:function(t,e,n){"use strict";var s=n("5e45"),i=n.n(s);i.a},b569:function(t,e,n){t.exports=n.p+"img/cosleep_window_img_complete@3x.e225be02.png"},bf83:function(t,e,n){t.exports=n.p+"img/Cosleep_Login-in_image_cat2@2x.47a0ff8b.png"},dc19:function(t,e,n){t.exports=n.p+"img/cosleep_window_img_login@2x.7da7fc49.png"},dc72:function(t,e){function n(){var t=document.documentElement.clientWidth,e=document.querySelector("html");e.style.fontSize=t/10+"px"}n(),window.addEventListener("resize",n)},e41e:function(t,e,n){}});
//# sourceMappingURL=app.d0fbe809.js.map